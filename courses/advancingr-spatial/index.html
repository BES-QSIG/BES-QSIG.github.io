<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 3.1.0">
  <meta name="generator" content="Hugo 0.50" />
  

  
  
  
  
    
  
  <meta name="description" content="Install packages For this &ldquo;tutorial&rdquo;, you will need some packages and their dependencies
if(!requireNamespace(&quot;raster&quot;)) install.packages(&quot;raster&quot;) if(!requireNamespace(&quot;sf&quot;)) install.packages(&quot;sf&quot;) if(!requireNamespace(&quot;ggplot2&quot;)) install.packages(&quot;ggplot2&quot;) if(!requireNamespace(&quot;ggspatial&quot;)) install.packages(&quot;ggspatial&quot;) if(!requireNamespace(&quot;rgdal&quot;)) install.packages(&quot;rgdal&quot;) if(!requireNamespace(&quot;RPostgreSQL&quot;)) install.packages(&quot;RPostgreSQL&quot;) if(!requireNamespace(&quot;rgbif&quot;)) install.packages(&quot;rgbif&quot;) library(raster) library(sf) library(ggplot2) library(ggspatial) library(RPostgreSQL) library(rgdal) library(rgbif)  The data for this tutorial are available from here.
PART I: What is a spatial object? A spatial object is an entity with coordinates in a geographical space (x, y) or (x, y, z) with a specific projection.">

  
  <link rel="alternate" hreflang="en-us" href="/courses/advancingr-spatial/">

  


  

  

  

  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" crossorigin="anonymous">
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700|Roboto:400,400italic,700|Roboto+Mono">
  

  <link rel="stylesheet" href="/styles.css">
  

  
  
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="BES QUANTITATIVE ECOLOGY GROUP">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="BES QUANTITATIVE ECOLOGY GROUP">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/courses/advancingr-spatial/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@bes_qe_sig">
  <meta property="twitter:creator" content="@bes_qe_sig">
  
  <meta property="og:site_name" content="BES QUANTITATIVE ECOLOGY GROUP">
  <meta property="og:url" content="/courses/advancingr-spatial/">
  <meta property="og:title" content="Day Two: Spatial data manipulation and visualisation in R | BES QUANTITATIVE ECOLOGY GROUP">
  <meta property="og:description" content="Install packages For this &ldquo;tutorial&rdquo;, you will need some packages and their dependencies
if(!requireNamespace(&quot;raster&quot;)) install.packages(&quot;raster&quot;) if(!requireNamespace(&quot;sf&quot;)) install.packages(&quot;sf&quot;) if(!requireNamespace(&quot;ggplot2&quot;)) install.packages(&quot;ggplot2&quot;) if(!requireNamespace(&quot;ggspatial&quot;)) install.packages(&quot;ggspatial&quot;) if(!requireNamespace(&quot;rgdal&quot;)) install.packages(&quot;rgdal&quot;) if(!requireNamespace(&quot;RPostgreSQL&quot;)) install.packages(&quot;RPostgreSQL&quot;) if(!requireNamespace(&quot;rgbif&quot;)) install.packages(&quot;rgbif&quot;) library(raster) library(sf) library(ggplot2) library(ggspatial) library(RPostgreSQL) library(rgdal) library(rgbif)  The data for this tutorial are available from here.
PART I: What is a spatial object? A spatial object is an entity with coordinates in a geographical space (x, y) or (x, y, z) with a specific projection.">
  
  
    
  <meta property="og:image" content="/img/icon-192.png">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2018-11-20T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2018-11-20T00:00:00&#43;00:00">
  

  

  

  <title>Day Two: Spatial data manipulation and visualisation in R | BES QUANTITATIVE ECOLOGY GROUP</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >

<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">BES QUANTITATIVE ECOLOGY GROUP</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#events">
            
            <span>Events</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
            
            <span>Courses</span>
            
            <span class="caret"></span>
          </a>
          <ul class="dropdown-menu">
            
            <li class="dropdown-item my-0 py-0 mx-0 px-0">
              <a href="/courses/advancingr/">
                
                <span>Advancing Your R</span>
                
              </a>
            </li>
            
          </ul>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        

      

        

        
      </ul>

    </div>
  </div>
</nav>



<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <input name="q" type="search" class="form-control" id="search-query" placeholder="Search..." autocomplete="off">
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/">Courses</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/courses/advancingr/">Advancing Your R</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/courses/advancingr-tidyverse/">Day One: Data manipulation and Visualisation</a>
      </li>
      
      <li class="active">
        <a href="/courses/advancingr-spatial/">Day Two: Working with spatial data</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

    </div>

    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      
      <p class="docs-toc-title">On this page</p>
      

      <nav id="TableOfContents">
<ul>
<li><a href="#install-packages">Install packages</a></li>
<li><a href="#part-i-what-is-a-spatial-object">PART I: What is a spatial object?</a></li>
<li><a href="#part-ii-building-and-working-with-spatial-objects-using-sf-in-r">PART II: Building and working with spatial objects using sf in R</a>
<ul>
<li><a href="#modify-sf-sfc-objects">Modify sf - sfc objects</a>
<ul>
<li><a href="#lines">Lines</a></li>
<li><a href="#polygon">Polygon</a></li>
<li><a href="#intersects-and-intesections">Intersects and intesections</a></li>
<li><a href="#circle-buffer-intersection">circle buffer intersection</a></li>
<li><a href="#difference-between-objects">Difference between objects</a></li>
<li><a href="#union-merge-and-melt-objects">Union (merge and melt) objects</a></li>
</ul></li>
</ul></li>
<li><a href="#part-iii-load-and-manipulate-spatial-objects">PART III: Load and manipulate spatial objects</a>
<ul>
<li><a href="#raster-object">Raster object</a>
<ul>
<li><a href="#land-cover">Land cover</a></li>
<li><a href="#spatial-extraction-raster-value-for-a-vector-object">Spatial extraction (raster value for a vector object)</a></li>
</ul></li>
<li><a href="#vector-object">Vector object</a></li>
<li><a href="#read-and-write-your-spatial-object-in-shapefile">Read and write your spatial object in Shapefile</a></li>
<li><a href="#subseting-and-filtering">Subseting and filtering</a></li>
</ul></li>
<li><a href="#part-iv-interfacing-r-and-posgresql-postgis">PART IV: Interfacing R and PosgreSQL/PostGIS</a>
<ul>
<li><a href="#create-postgresql-database">Create PostgreSQL database</a></li>
<li><a href="#send-spatial-data-to-your-newly-created-database-located-on-your-local-server">Send spatial data to your newly created database located on your local server</a></li>
<li><a href="#interacting-with-postgresql-through-your-terminal">Interacting with PostgreSQL through your terminal</a></li>
<li><a href="#some-more-raster-operations">Some more raster operations</a>
<ul>
<li><a href="#hillshade-and-terrain-map">Hillshade and Terrain map</a></li>
</ul></li>
</ul></li>
<li><a href="#part-v-plot-your-spatial-object-data-with-ggplot2">PART V: Plot your spatial object data with ggplot2</a>
<ul>
<li><a href="#adding-a-raster-to-a-ggplot">Adding a raster to a ggplot</a></li>
<li><a href="#can-you-plot-the-deer-occurrence-extracted-from-gbif-on-a-uk-map">Can you plot the deer occurrence extracted from GBIF on a UK map?</a></li>
</ul></li>
<li><a href="#your-challenge-build-some-wider-map-for-europe">Your challenge, build some wider map for Europe</a></li>
</ul>
</nav>

      <ul class="nav toc-top">
        <li><a href="#">Back to top</a></li>
      </ul>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">
      <div id="search-hits">
        
      </div>
      <article class="article" itemscope itemtype="http://schema.org/Article">

        <div class="docs-article-container">
          <h1 itemprop="name">Day Two: Spatial data manipulation and visualisation in R</h1>
          
          <h2>Reto Schmucki</h2>
          
          <hr>
          <div class="article-style" itemprop="articleBody">
            

<h1 id="install-packages">Install packages</h1>

<p>For this &ldquo;tutorial&rdquo;, you will need some packages and their dependencies</p>

<pre><code class="language-r">if(!requireNamespace(&quot;raster&quot;)) install.packages(&quot;raster&quot;)
if(!requireNamespace(&quot;sf&quot;)) install.packages(&quot;sf&quot;)
if(!requireNamespace(&quot;ggplot2&quot;)) install.packages(&quot;ggplot2&quot;)
if(!requireNamespace(&quot;ggspatial&quot;)) install.packages(&quot;ggspatial&quot;)
if(!requireNamespace(&quot;rgdal&quot;)) install.packages(&quot;rgdal&quot;)
if(!requireNamespace(&quot;RPostgreSQL&quot;)) install.packages(&quot;RPostgreSQL&quot;)
if(!requireNamespace(&quot;rgbif&quot;)) install.packages(&quot;rgbif&quot;)

library(raster)
library(sf)
library(ggplot2)
library(ggspatial)
library(RPostgreSQL)
library(rgdal)
library(rgbif)
</code></pre>

<p>The data for this tutorial are available from <a href="needs link" target="_blank">here</a>.</p>

<h1 id="part-i-what-is-a-spatial-object">PART I: What is a spatial object?</h1>

<p>A spatial object is an entity with coordinates in a geographical space (x, y) or (x, y, z) with a specific projection.</p>

<blockquote>
<p><strong>Coordinates are not enough!</strong> To illustrate this affirmation, just have a look at this example.</p>
</blockquote>

<pre><code class="language-r"># create two ojbects with their long/lat coordinates
point_liverpool &lt;- data.frame(name = 'Liverpool', longitude = -2.98, latitude = 53.41)
point_edinburgh &lt;- data.frame(name = 'Edinburgh', longitude = -3.19, latitude = 55.95)
city_points &lt;- rbind(point_liverpool, point_edinburgh)

# Now have a look at them in a 2D space.
plot(city_points[,c(&quot;longitude&quot;, &quot;latitude&quot;)], pch = 19, col = 'magenta')
text(city_points[,c(&quot;longitude&quot;, &quot;latitude&quot;)], labels = city_points$name, pos = c(2, 4))
</code></pre>

<p>With these two cities, although the coordinates are right, you have no information about the context of their coordinates.</p>

<blockquote>
<p><em>Spatial projection</em>
The Coordinate Reference System or CRS of a spatial object tells R where the spatial object is located in geographic space (<em>see</em> <a href="http://spatialreference.org/" target="_blank">http://spatialreference.org/</a>).</p>
</blockquote>

<p>For example, you might have seen the expression WGS84, the common longitude-latitude (degree decimal), or maybe EPSG:4326.
In other words, spatial objects should come with some information relative to their reference system (CRS), no matter if it&rsquo;s a raster, a point, a line of a complex polygon. To locate an object in space, you need to know the reference system and the units in which the coordinates are expressed.</p>

<pre><code class="language-r"># Adding a projection to our cities, using WGS84
proj_city_points &lt;- sf::st_as_sf(city_points, coords = c(&quot;longitude&quot;, &quot;latitude&quot;), crs = 4326)
plot(proj_city_points, pch = 19, col = c(&quot;magenta&quot;, &quot;blue&quot;), cex = 1.5)
legend(&quot;topleft&quot;, legend = proj_city_points$name, col = c(&quot;magenta&quot;, &quot;blue&quot;), pch = 19, cex = 1.5, bty=&quot;n&quot;)

# get some base layer to see this in perspective
country_sf_gbr &lt;- sf::st_as_sf(raster::getData(name = &quot;GADM&quot;, country = 'GBR', level = 1))

# visualize the points on a map
plot(country_sf_gbr$geometry, graticule = TRUE, axes = TRUE, col = &quot;wheat1&quot;, xlim = c(-15, 5), ylim = c(50, 61))
plot(proj_city_points, pch = 19, col = c(&quot;magenta&quot;, &quot;blue&quot;), cex = 1.5, add = TRUE)
legend(&quot;topleft&quot;, legend = proj_city_points$name, col = c(&quot;magenta&quot;, &quot;blue&quot;), pch = 19, cex = 1.5, bty=&quot;n&quot;)
text(x = -15, y = 50.2, &quot;EPSG:4326 - WGS84&quot;, pos = 4, cex = 0.7)
</code></pre>

<p>The advantage of having a CRS is that you can transform your coordinates, so it is expressed to other reference system (i.e. on other origin and units).</p>

<blockquote>
<p><em>Changing Projection</em> (st_tranform)
Some projections more appropriate for representing specific geographic context. Why is their so many CRS?</p>
</blockquote>

<pre><code class="language-r"># Reproject your city points in OSGB 1936 / British National Grid (EPSG:27700)
proj_city_points_osgb &lt;- sf::st_transform(proj_city_points, crs = 27700)
country_sf_gbr_osgb &lt;- sf::st_transform(country_sf_gbr, crs = 27700)

# visualize the points on a map
dev.new()
plot(country_sf_gbr_osgb$geometry, graticule = TRUE, axes = TRUE, col = &quot;wheat1&quot;, xlim = c(-333585, 713000), ylim = c(20000, 1290000))
plot(proj_city_points_osgb, pch = 19, col = c(&quot;magenta&quot;, &quot;blue&quot;), cex = 1.5, add = TRUE)
legend(&quot;topleft&quot;, legend = proj_city_points_osgb$name, col = c(&quot;magenta&quot;, &quot;blue&quot;), pch = 19, cex = 1.5, bty=&quot;n&quot;)
text(x = -453585, y = 25000, &quot;EPSG:27700 - OSGB 1936 &quot;, pos = 4, cex = 0.7)
</code></pre>

<blockquote>
<p>to get coordinates on a plot, you can use the function drawExtent() from the raster package that allow you to clic on a map to get the coordinates of an extent.</p>
</blockquote>

<pre><code class="language-r">plot(country_sf_gbr_osgb$geometry, graticule = TRUE, axes = TRUE, col = &quot;wheat1&quot;)
raster::drawExtent()
</code></pre>

<h1 id="part-ii-building-and-working-with-spatial-objects-using-sf-in-r">PART II: Building and working with spatial objects using sf in R</h1>

<p>This is a revolution, providing a modern, stronger and cleaner workflow to deal with spatial object in R, at least vector data. The &ldquo;sf&rdquo; is developed by some of the same people that provide us with &ldquo;sp&rdquo;, offering an ecosystem that open new opportunities to do GIS in R. The firs place to look for resource is the sf package website <a href="https://r-spatial.github.io/sf/index.html" target="_blank">https://r-spatial.github.io/sf/index.html</a>, this a first stop to learn how it work and develop new skills in R.</p>

<pre><code class="language-r">library(sf)

p1 &lt;- sf::st_point(c(1, 2))
p2 &lt;- sf::st_point(c(3, 5))
p3 &lt;- sf::st_multipoint(matrix(2 * c(1, 2, 4, 2, 3, 5, 7, 3), ncol = 2, byrow = TRUE))
p4 &lt;- sf::st_as_sf(data.frame(X = c(1, 4, 3, 7), Y = c(2, 2, 5, 3) ), coords = c(&quot;X&quot;, &quot;Y&quot;))
p5 &lt;- sf::st_sfc(p1, p2, p3)

plot(p1)
plot(p3, col = &quot;blue&quot;, pch = 19)
plot(p2, col = &quot;magenta&quot;, pch = 19, add = TRUE)
</code></pre>

<h2 id="modify-sf-sfc-objects">Modify sf - sfc objects</h2>

<pre><code class="language-r">p6 &lt;- sf::st_cast(x = st_sfc(p3), to = &quot;POINT&quot;)
p_multi &lt;- sf::st_cast(p6, ids = c(1, 2, 1, 2), group_or_plist = TRUE, to = &quot;MULTIPOINT&quot;)

plot(p_multi[1], ylim = c(0, 20), xlim = c(0, 20), col = &quot;tomato3&quot;, pch = 19)
plot(p_multi[2], col = &quot;magenta&quot;, pch = 19, add = TRUE)

p7 &lt;- st_cast(x = p4, to = &quot;POINT&quot;)
p8 &lt;- rbind(st_cast(x = p4[1:3,], to = &quot;MULTIPOINT&quot;), p4[4,])
p8
</code></pre>

<h3 id="lines">Lines</h3>

<pre><code class="language-r">l1 &lt;- sf::st_linestring(matrix(c(1, 1, 2, 2, 3, 3, 4, 4, 4, 2), ncol = 2, byrow = TRUE))
lp &lt;- sf::st_cast(x = sf::st_sfc(l1), to = &quot;MULTIPOINT&quot;)
bl1 &lt;- sf::st_buffer(l1, 2)
blp &lt;- sf::st_cast(x = sf::st_sfc(bl1), to = &quot;MULTIPOINT&quot;)

plot(lp, col = &quot;blue&quot;, pch = 19, cex = 2, ylim = c(-5, 10), xlim = c(-5, 10))
plot(blp, col = &quot;magenta&quot;, pch = 19, cex = 1, add = TRUE)
plot(l1, col = &quot;tomato3&quot;, lwd = 1.5, add = TRUE)
</code></pre>

<h3 id="polygon">Polygon</h3>

<pre><code class="language-r">bl1 &lt;- sf::st_buffer(l1, 2)
blp &lt;- sf::st_cast(x = sf::st_sfc(bl1), to = &quot;MULTIPOINT&quot;)

plot(bl1, col = &quot;lightblue&quot;, border = NA)
plot(lp, col = &quot;blue&quot;, pch = 19, cex = 2, ylim = c(-5, 10), xlim = c(-5, 10), add = TRUE)
plot(blp, col = &quot;magenta&quot;, pch = 19, cex = 1, add = TRUE)
plot(l1, col = &quot;tomato3&quot;, lwd = 1.5, add = TRUE)
</code></pre>

<h3 id="intersects-and-intesections">Intersects and intesections</h3>

<pre><code class="language-r">p1 &lt;- sf::st_as_sf(data.frame(X = c(1, 4, 3, 7), Y = c(2, 2, 5, 3) ), coords = c(&quot;X&quot;, &quot;Y&quot;), crs = 4326)
poly1 &lt;- st_as_sfc(st_bbox(st_buffer(p1[2,], 2)))
poly2 &lt;- st_as_sfc(st_bbox(st_buffer(p1[3,], 1.5)))

plot(st_geometry(poly1), col = &quot;goldenrod&quot;, xlim = c(-5, 5), ylim = c(0, 10))
plot(st_geometry(poly2), col = rgb(1,1,0,0.3), add = TRUE)
plot(st_geometry(p1), col = &quot;magenta&quot;, pch = 19, cex= 1.5, add = TRUE)

## INTERSECTION
poly3 &lt;- sf::st_intersection(poly1, poly2)
plot(st_geometry(poly3), col = &quot;lightblue&quot;, add = TRUE)

## INTERSECT
p1_poly1 &lt;- sf::st_intersects(p1, poly1, sparse = FALSE)
plot(st_geometry(p1[p1_poly1,]), col = &quot;turquoise&quot;, pch = 19, cex = 2, add = TRUE)
</code></pre>

<h3 id="circle-buffer-intersection">circle buffer intersection</h3>

<pre><code class="language-r">poly1 &lt;- sf::st_buffer(p1[2,], 2)
poly2 &lt;- sf::st_buffer(p1[3,], 1.5)
int_b2_b1 &lt;- sf::st_intersection(poly2, poly1)

plot(st_geometry(poly1), col = NA, border = &quot;red&quot;, ylim = c(0, 7), axes = TRUE)
plot(st_geometry(poly2), add = TRUE)
plot(st_geometry(p1[2,]), col = &quot;black&quot;, pch = 19, add = TRUE)
plot(st_geometry(p1[3,]), col = &quot;blue&quot;, pch = 19, add = TRUE)
plot(st_geometry(int_b2_b1), col = &quot;lightblue&quot;, boder = NA, add = TRUE)
</code></pre>

<h3 id="difference-between-objects">Difference between objects</h3>

<pre><code class="language-r">poly1 &lt;- sf::st_buffer(p1[2,], 2)
poly2 &lt;- sf::st_buffer(p1[2,], 4)
dif_poly2_poly1 &lt;- sf::st_difference(poly2, poly1)

plot(st_geometry(dif_poly2_poly1), col = &quot;orange&quot;, axes = TRUE)
plot(st_geometry(poly1), col = &quot;blue&quot;, add = TRUE)
</code></pre>

<h3 id="union-merge-and-melt-objects">Union (merge and melt) objects</h3>

<pre><code class="language-r">poly1 &lt;- sf::st_buffer(p1[2,], 2)
poly2 &lt;- sf::st_buffer(p1[2,], 4)
uni_poly1_2 &lt;- sf::st_union(dif_poly2_poly1, poly1)

plot(st_geometry(uni_poly1_2), col = &quot;lightblue&quot;, axes = TRUE)
plot(st_geometry(poly1), col = &quot;tomato3&quot;, add = TRUE)
plot(st_geometry(st_buffer(poly1,-1)), col = &quot;white&quot;, add = TRUE)
plot(st_geometry(st_centroid(poly1)), col = &quot;black&quot;, pch = 19, add = TRUE)
</code></pre>

<p>If you like it tidy and the dplyr way? Since sf is essentally a data.frame with  a list of spatial attribute attached, it works well in the tidy univers. Have a look at this blog to get a first feel <a href="http://strimas.com/r/tidy-sf/" target="_blank">http://strimas.com/r/tidy-sf/</a>.</p>

<h1 id="part-iii-load-and-manipulate-spatial-objects">PART III: Load and manipulate spatial objects</h1>

<p>Spatial data are increasingly available from the Web, from species occurrence to natural and cultural features data, accessing spatial data is now relatively easy. For base layers, you can find many freely available data sets such as the ones provided by the Natural Earth [<a href="http://www.naturalearthdata.com" target="_blank">http://www.naturalearthdata.com</a>], the IUCN Protected Planet database [www.protectedplanet.net], the GADM project [<a href="https://gadm.org" target="_blank">https://gadm.org</a>], worldclim [<a href="http://worldclim.org/version2" target="_blank">http://worldclim.org/version2</a>] the CHELSA climate data sets [<a href="http://chelsa-climate.org" target="_blank">http://chelsa-climate.org</a>] or the European Environmental Agency [<a href="https://www.eea.europa.eu/data-and-maps/data#c0=5&amp;c11=&amp;c5=all&amp;b_start=0" target="_blank">https://www.eea.europa.eu/data-and-maps/data#c0=5&amp;c11=&amp;c5=all&amp;b_start=0</a>]</p>

<h2 id="raster-object">Raster object</h2>

<pre><code class="language-r">library(raster)
# annual mean temperature
chelsa_amt &lt;- raster::raster(&quot;data/CHELSA_bio10_1.tif&quot;)
raster::plot(chelsa_amt)
chelsa_amt

# crop climate data for a specific bounding box
chelsa_amt_gbr &lt;- raster::crop(chelsa_amt, raster::extent(country_sf_gbr)) # cut the worldwide raster according to
raster::plot(chelsa_amt_gbr)

# convert temperature data in usual unit
chelsa_amt_gbr[] &lt;- chelsa_amt_gbr[]*0.1 # convert temperature data in usual unit
raster::res(chelsa_amt_gbr)

# change resolution aggregate() or disaggregate()
chelsa_amt_gbr_2 &lt;- raster::disaggregate(chelsa_amt_gbr, fact=4)
raster::res(chelsa_amt_gbr_2)

chelsa_amt_gbr_3 &lt;- raster::aggregate(chelsa_amt_gbr, fact=4)
raster::res(chelsa_amt_gbr_3)
raster::plot(chelsa_amt_gbr_3)
</code></pre>

<blockquote>
<p><em>Other format for gridded data</em>
netCDF format is commonly used for gridded time series (temperature)</p>
</blockquote>

<pre><code class="language-r">rast_1 &lt;- raster::raster(&quot;data/tg_0.25deg_reg_2011-2017_v17.0.nc&quot;, band = 1)
rast_2 &lt;- raster::raster(&quot;data/tg_0.25deg_reg_2011-2017_v17.0.nc&quot;, band = 2)
rast_stack &lt;- raster::stack(rast_1, rast_2)
plot(rast_stack$mean.temperature.1)
plot(rast_stack)
</code></pre>

<h3 id="land-cover">Land cover</h3>

<pre><code class="language-r">eunis_1km &lt;- raster::raster(&quot;data/es_l1_1km.tif&quot;)
raster::plot(eunis_1km)
raster::projection(eunis_1km)
</code></pre>

<h3 id="spatial-extraction-raster-value-for-a-vector-object">Spatial extraction (raster value for a vector object)</h3>

<pre><code class="language-r">proj_city_points_laea &lt;- sf::st_transform(proj_city_points, raster::projection(eunis_1km))
eunis_city &lt;- raster::extract(eunis_1km, as(proj_city_points_laea, &quot;Spatial&quot;))
eunis_city &lt;- raster::extract(eunis_1km, as(sf::st_buffer(proj_city_points_laea, 10000), &quot;Spatial&quot;))

str(eunis_city)
table(eunis_city[[1]])

proportion &lt;- as.numeric(table(eunis_city[[1]]))[which(names(table(eunis_city[[1]]))!=&quot;10&quot;)] / sum(as.numeric(table(eunis_city[[1]]))) * 100
proportion
</code></pre>

<h2 id="vector-object">Vector object</h2>

<pre><code class="language-r">library(sf)
st_prov &lt;- sf::st_read(&quot;data/GADM_2.8_GBR_adm2.shp&quot;)
plot(st_prov[,&quot;HASC_2&quot;], graticule = TRUE, axes = TRUE)

# Older option
library(rgdal)
st_prov_sp &lt;- rgdal::readOGR(&quot;data&quot;, &quot;GADM_2.8_GBR_adm2&quot;)
class(st_prov_sp)
plot(st_prov_sp, axes = TRUE)

# Change projection of an &quot;sp&quot; object
crs.osgb = CRS(&quot;+init=epsg:27700&quot;)
st_prov_sp.osgb = sp::spTransform(st_prov_sp, crs.osgb)
plot(st_prov_sp.osgb, axes = TRUE)

spplot(st_prov_sp.osgb, &quot;HASC_2&quot;, colorkey = FALSE)
</code></pre>

<h2 id="read-and-write-your-spatial-object-in-shapefile">Read and write your spatial object in Shapefile</h2>

<pre><code class="language-r"># read with &quot;sf&quot;
st_prov &lt;- sf::st_read(&quot;data/GADM_2.8_GBR_adm2.shp&quot;)

# write with &quot;sf&quot;
sf::st_write(st_prov, dsn = &quot;st_prov.shp&quot;, delete_layer = TRUE)

# write with OGR (rgdal)
st_prov_sp &lt;- sf::as(st_prov, &quot;Spatial&quot;)
rgdal::writeOGR(st_prov_sp, &quot;st_prov_sp&quot;, driver = &quot;ESRI Shapefile&quot;)
</code></pre>

<h2 id="subseting-and-filtering">Subseting and filtering</h2>

<pre><code class="language-r">wdpa_gbr &lt;- sf::st_read(&quot;data/wdpa_gbr.shp&quot;)
wdpa_gbr &lt;- wdpa_gbr[wdpa_gbr$MARINE == 0,]
plot(wdpa_gbr$geometry)

## bounding box
bb &lt;- sf::st_bbox(country_sf_gbr)
bb

## faster solution
bb_poly &lt;- sf::st_make_grid(country_sf_gbr, n = 1)
wdpa_gbr_2 &lt;- sf::st_intersects(wdpa_gbr, bb_poly, sparse = FALSE)
wdpa_gbr &lt;- wdpa_gbr[wdpa_gbr_2,]
plot(wdpa_gbr$geometry[wdpa_gbr$IUCN_CAT == &quot;V&quot;])

wdpa_cntr &lt;- sf::st_centroid(wdpa_gbr)
plot(wdpa_cntr$geometry)

## building a box from the st_bbox output
g.bbox &lt;- raster::extent(as.numeric(sf::st_bbox(country_sf_gbr))[c(1,3,2,4)])
g.bbox_sf &lt;- sf::st_set_crs(sf::st_as_sfc(as(g.bbox, 'SpatialPolygons')), 3035)
plot(g.bbox_sf, add = TRUE)
</code></pre>

<blockquote>
<p><em>Try it your self</em>
Get some river data from
<a href="http://land.copernicus.eu/pan-european/satellite-derived-products/eu-hydro/eu-hydro-public-beta/eu-hydro-river-network/view" target="_blank">http://land.copernicus.eu/pan-european/satellite-derived-products/eu-hydro/eu-hydro-public-beta/eu-hydro-river-network/view</a></p>
</blockquote>

<h1 id="part-iv-interfacing-r-and-posgresql-postgis">PART IV: Interfacing R and PosgreSQL/PostGIS</h1>

<ol>
<li>Install PostgreSQL, with the PostGIS extension</li>
<li>Create a database</li>
<li>Populate your database</li>
<li>Extract from your database</li>
</ol>

<h2 id="create-postgresql-database">Create PostgreSQL database</h2>

<pre><code class="language-r">library('RPostgreSQL')

# create a new database in on your local PostgreSQL server
sql_createdb &lt;- paste0(&quot;-h localhost -U &quot;, &quot;postgres&quot;, &quot; -T &quot;, &quot;postgis_22_sample&quot;, &quot; -E UTF8 -O postgres &quot;, &quot;RGIS_workshop&quot;)
system2(&quot;createdb&quot;, sql_createdb, invisible = FALSE)

# connect R to your server and newly created database
drv &lt;- dbDriver(&quot;PostgreSQL&quot;)
dbcon &lt;- dbConnect(drv, dbname = &quot;RGIS_workshop&quot;,
                 host = &quot;localhost&quot;, port = 5432,
                 user = &quot;postgres&quot;, password = &quot;****&quot;)

# create a schema, send your first SQL statement (query)
sql_createschema &lt;- paste0(&quot;CREATE SCHEMA IF NOT EXISTS my_shemas AUTHORIZATION postgres;&quot;)
dbSendStatement(dbcon, sql_createschema)

# have a look at your PostgreSQL database, using pgAdmin
</code></pre>

<h2 id="send-spatial-data-to-your-newly-created-database-located-on-your-local-server">Send spatial data to your newly created database located on your local server</h2>

<pre><code class="language-r">library(sf)
dbcon &lt;- dbConnect(drv, dbname = &quot;RGIS_workshop&quot;,
                 host = &quot;localhost&quot;, port = 5432,
                 user = &quot;postgres&quot;, password = &quot;*****&quot;)

wdpa_gbr &lt;- sf::st_read(&quot;data/wdpa_gbr.shp&quot;)
sf::st_write(wdpa_gbr, dbcon, overwrite = TRUE)

# check if you succeeded
dbExistsTable(dbcon, &quot;wdpa_gbr&quot;)

# extract some data with a SQL query and a condition
psql_extract &lt;- dbGetQuery(dbcon, &quot;SELECT \&quot;IUCN_CAT\&quot;, ST_AsText(geometry) as geom FROM wdpa_gbr WHERE \&quot;IUCN_CAT\&quot; = \'V\' AND \&quot;MARINE\&quot; = \'0\'&quot;)

str(psql_extract)
new_extract &lt;- sf::st_as_sf(psql_extract, wkt = &quot;geom&quot;)
new_extract &lt;- sf::st_set_crs(new_extract, 4326)
plot(new_extract)

new_area &lt;- sf::st_area(sf::st_transform(new_extract, 27700))
head(new_area)
</code></pre>

<h2 id="interacting-with-postgresql-through-your-terminal">Interacting with PostgreSQL through your terminal</h2>

<blockquote>
<p><em>In your terminal, type</em>
ogr2ogr -f &ldquo;PostgreSQL&rdquo; -t_srs EPSG:27700 PG:&ldquo;host=localhost port=5432 dbname=RGIS_workshop user=postgres password=****&rdquo; &lsquo;C:\Users\retoschm\OneDrive - Natural Environment Research Council\Rgis_workshop\data\GADM_2.8_GBR_adm2.shp&rsquo; -nln public.wdpa_gbr2 -nlt MULTIPOLYGON -overwrite -progress -unsetFid &ndash;config PG_USE_COPY YES</p>
</blockquote>

<h2 id="some-more-raster-operations">Some more raster operations</h2>

<h3 id="hillshade-and-terrain-map">Hillshade and Terrain map</h3>

<pre><code class="language-r">library(raster)
alt &lt;- raster::getData(&quot;alt&quot;, country = &quot;GBR&quot;)
slope &lt;- raster::terrain(alt, opt = &quot;slope&quot;)
aspect &lt;- raster::terrain(alt, opt = &quot;aspect&quot;)
hill &lt;- raster::hillShade(slope, aspect, angle = 40, direction = 270)

# plot your raster and newly extracted polygons on a map
raster::plot(hill, col = grey(0:100/100), legend = FALSE)
plot(sf::st_transform(new_extract, 4326), add = TRUE)
raster::plot(alt, col = terrain.colors(25, alpha = 0.5), add = TRUE)
</code></pre>

<h1 id="part-v-plot-your-spatial-object-data-with-ggplot2">PART V: Plot your spatial object data with ggplot2</h1>

<pre><code class="language-r">library(ggplot2)
library(ggspatial)

country_sf_gbr &lt;- sf::st_as_sf(raster::getData(name = &quot;GADM&quot;, country = 'GBR', level = 1))
country_sf_gbr_osgb &lt;- sf::st_transform(country_sf_gbr, crs = 27700)

point_liverpool &lt;- data.frame(name = 'Liverpool', longitude = -2.98, latitude = 53.41)
point_edinburgh &lt;- data.frame(name = 'Edinburgh', longitude = -3.19, latitude = 55.95)
city_points &lt;- rbind(point_liverpool, point_edinburgh)
proj_city_points_osgb &lt;- sf::st_transform(sf::st_as_sf(city_points, coords = c(&quot;longitude&quot;, &quot;latitude&quot;), crs = 4326), crs = 27700)

## simple plot with ggplot
ggplot(data = country_sf_gbr_osgb) +
    geom_sf() +
    xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
    ggtitle(&quot;GBR map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(country_sf_gbr_osgb$NAME_1)), &quot; countries)&quot;))

## some colors
ggplot(data = country_sf_gbr_osgb) +
    geom_sf(color = &quot;black&quot;, fill = &quot;wheat1&quot; ) +
    xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
    ggtitle(&quot;GBR map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(country_sf_gbr_osgb$NAME_1)), &quot; countries)&quot;))

## color with some qualitative meaning
ggplot(data = country_sf_gbr_osgb) +
    geom_sf(aes(fill = as.numeric(sf::st_area(country_sf_gbr_osgb)))) +
    scale_fill_viridis_c(option = &quot;plasma&quot;, name = &quot;Area&quot;) +
    xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
    ggtitle(&quot;GBR map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(country_sf_gbr_osgb$NAME_1)), &quot; countries)&quot;))

# add a scale bar and a north arrow
ggplot(data = country_sf_gbr_osgb) +
    geom_sf() +
    xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
    annotation_scale(location = &quot;bl&quot;, width_hint = 0.5) +
    annotation_north_arrow(location = &quot;bl&quot;, which_north = &quot;true&quot;,
          pad_x = unit(0.75, &quot;in&quot;), pad_y = unit(0.5, &quot;in&quot;),
          style = north_arrow_fancy_orienteering) +
    ggtitle(&quot;GBR map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(country_sf_gbr_osgb$NAME_1)), &quot; countries)&quot;))

# add more spatial object with geom_sf
ggplot(data = country_sf_gbr_osgb) +
    geom_sf() +
    geom_sf(data = proj_city_points_osgb, size = 4, color = c(&quot;magenta&quot;, &quot;blue&quot;)) +
    xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
    annotate(geom = &quot;text&quot;,
            x = sf::st_coordinates(sf::st_centroid(country_sf_gbr_osgb))[,1],
            y = sf::st_coordinates(sf::st_centroid(country_sf_gbr_osgb))[,2],
            label = country_sf_gbr_osgb$NAME_1,
        fontface = &quot;italic&quot;, color = &quot;grey22&quot;, size = 3)  +
    annotation_scale(location = &quot;bl&quot;, width_hint = 0.5) +
    annotation_north_arrow(location = &quot;bl&quot;, which_north = &quot;true&quot;,
          pad_x = unit(0.75, &quot;in&quot;), pad_y = unit(0.5, &quot;in&quot;),
          style = north_arrow_fancy_orienteering) +
    ggtitle(&quot;GBR map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(country_sf_gbr_osgb$NAME_1)), &quot; countries)&quot;))
</code></pre>

<h2 id="adding-a-raster-to-a-ggplot">Adding a raster to a ggplot</h2>

<pre><code class="language-r">library(raster)
alt &lt;- raster::getData(&quot;alt&quot;, country = &quot;GBR&quot;)
# need to reproject your raster to match the other layer and get a regular resolution
alt_prj &lt;- raster::projectRaster(alt, crs = sp::CRS(&quot;+init=epsg:27700&quot;), res = 1000)

# first method
alt_prj_df &lt;- raster::as.data.frame(alt_prj, xy = TRUE)
colnames(alt_prj_df)  &lt;- c(&quot;x&quot;, &quot;y&quot;, &quot;Altitude&quot;)

ggplot() +
    geom_tile(data = alt_prj_df, aes(x = x, y = y, fill = Altitude)) +
    xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
    annotate(geom = &quot;text&quot;,
            x = sf::st_coordinates(sf::st_centroid(country_sf_gbr_osgb))[,1],
            y = sf::st_coordinates(sf::st_centroid(country_sf_gbr_osgb))[,2],
            label = country_sf_gbr_osgb$NAME_1,
        fontface = &quot;italic&quot;, color = &quot;white&quot;, size = 3) +
    annotation_scale(location = &quot;bl&quot;, width_hint = 0.5) +
    annotation_north_arrow(location = &quot;bl&quot;, which_north = &quot;true&quot;,
          pad_x = unit(0.75, &quot;in&quot;), pad_y = unit(0.5, &quot;in&quot;),
          style = north_arrow_fancy_orienteering) +
    ggtitle(&quot;GBR map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(country_sf_gbr_osgb$NAME_1)), &quot; countries)&quot;)) +
    theme(panel.background = element_rect(fill = &quot;aliceblue&quot;))

## second method (better)
alt_prj_spdf &lt;- as(alt_prj, &quot;SpatialPixelsDataFrame&quot;)
alt_prj_df2 &lt;- as.data.frame(alt_prj_spdf)
colnames(alt_prj_df2) &lt;- c(&quot;Altitude&quot;, &quot;x&quot;, &quot;y&quot;)

ggplot() +
    geom_sf(data = country_sf_gbr_osgb) +
    geom_tile(data = alt_prj_df2, aes(x = x, y = y, fill = Altitude)) +
    geom_sf(data = proj_city_points_osgb, size = 4, color = c(&quot;magenta&quot;, &quot;blue&quot;)) +
    xlab(&quot;Longitude&quot;) + ylab(&quot;Latitude&quot;) +
    annotate(geom = &quot;text&quot;,
            x = sf::st_coordinates(sf::st_centroid(country_sf_gbr_osgb))[,1],
            y = sf::st_coordinates(sf::st_centroid(country_sf_gbr_osgb))[,2],
            label = country_sf_gbr_osgb$NAME_1,
        fontface = &quot;italic&quot;, color = &quot;white&quot;, size = 3) +
    annotation_scale(location = &quot;bl&quot;, width_hint = 0.5) +
    annotation_north_arrow(location = &quot;bl&quot;,which_north = &quot;true&quot;,
          pad_x = unit(0.75, &quot;in&quot;), pad_y = unit(0.5, &quot;in&quot;),
          style = north_arrow_fancy_orienteering) +
    ggtitle(&quot;GBR map&quot;, subtitle = paste0(&quot;(&quot;, length(unique(country_sf_gbr_osgb$NAME_1)), &quot; countries)&quot;)) +
    theme(panel.background = element_rect(fill = &quot;aliceblue&quot;))
</code></pre>

<h2 id="can-you-plot-the-deer-occurrence-extracted-from-gbif-on-a-uk-map">Can you plot the deer occurrence extracted from GBIF on a UK map?</h2>

<pre><code class="language-r">library(rgbif)
deer_locations &lt;- occ_search(scientificName = &quot;Cervus elaphus&quot;, limit = 5000,
                             hasCoordinate = TRUE, country = &quot;GB&quot;,
                             return = &quot;data&quot;) %&gt;% dplyr::select(key, name, decimalLongitude,
                                 decimalLatitude, year, individualCount, datasetKey, country)

deer_locations_sf &lt;- sf::st_as_sf(deer_locations, coords = c(&quot;decimalLongitude&quot;, &quot;decimalLatitude&quot;), crs = 4326)
plot(deer_locations_sf[, &quot;datasetKey&quot;])
# ============
# YOUR TURN!
# ===========
</code></pre>

<h1 id="your-challenge-build-some-wider-map-for-europe">Your challenge, build some wider map for Europe</h1>

<p>Have a look at tutorial 1, 2 and 3 on how to draw beautiful map with sf.</p>

<ol>
<li><a href="https://www.r-spatial.org/r/2018/10/25/ggplot2-sf.html" target="_blank">https://www.r-spatial.org/r/2018/10/25/ggplot2-sf.html</a></li>
<li><a href="https://www.r-spatial.org/r/2018/10/25/ggplot2-sf-2.html" target="_blank">https://www.r-spatial.org/r/2018/10/25/ggplot2-sf-2.html</a></li>
<li><a href="https://www.r-spatial.org/r/2018/10/25/ggplot2-sf-3.html" target="_blank">https://www.r-spatial.org/r/2018/10/25/ggplot2-sf-3.html</a></li>
</ol>

<p>Look at the exellent sf vignettes (<em>see list here</em>: <a href="https://cran.r-project.org/web/packages/sf/index.html" target="_blank">https://cran.r-project.org/web/packages/sf/index.html</a>)</p>

          </div>

          

        </div>

        <div class="body-footer">
          Last updated on Nov 20, 2018
        </div>

      </article>

      <footer class="site-footer">
  
  <p class="powered-by">
    <a href="/privacy/">Privacy Policy</a>
  </p>
  

  <p class="powered-by">
    &copy; 2018 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
  </p>
</footer>


    </main>
  </div>
</div>

    

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
      

      
      
    

    <script src="/js/hugo-academic.js"></script>
    

    
    

    
    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "Search Results",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    <script src="/js/search.js"></script>
    

    
    

  </body>
</html>


